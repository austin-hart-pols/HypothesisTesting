<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>HYPOTHESIS TESTING</title>
    <meta charset="utf-8" />
    <meta name="author" content="Austin Hart" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# HYPOTHESIS TESTING
]
.subtitle[
## 4 tests in action
]
.author[
### Austin Hart
]
.institute[
### American University
]

---







# Topics covered

- Hypothesis testing  

- Meaning of a `\(p\)`-value  

- Four implementations
  - `\(t\)`-test for sample means
  - `\(t\)`-test for difference of means
  - `\(F\)`-test for multiple group differences
  - `\(t\)`-test for regression coefficients
  
- Jung et al (2014). "Female-named hurricanes" 


---
class: inverse, middle, right

# HYPOTHESIS TESTING
### Logic and Process


---
# Hypothesis testing

### Statistical hypothesis testing 

&gt; A method of inference that provides a basis for rejecting a hypothesis based on the plausibility of the data. 
&gt;
&gt; Typically for evaluating "significance" of an association observed in sample data.


---
# Testing procedure

Given a sample statistic from your data:

- Formalize competing hypotheses
  - Alternative, `\(H_A\)`: baseline expectation
  - Null, `\(H_0\)`: opposite of `\(H_A\)`; "status quo" expectation  
  
- Calculate prob of the data given true null, `\(p = Pr(Sample~Stat | H_0)\)`  

- Reject/Fail to reject null, typically when `\(p \leq 0.05\)`  


---
# How is this possible?

&gt; Hypothesis testing is possible because of what we know about the sampling distribution of different sample statistics.

- Pop parameters give shape to the sampling distribution

- Null an argument about parameters *AND, THEREFORE,* sampling dist

- Allows us to gauge probability of a sample stat


---
class: inverse, middle, right

# THE ALL MIGHTY p-VALUE
### Meaning and use

---
# The meaning of a p-value

&gt; If the null hypothesis is true, what share of samples reveal a stat or association like yours? 

A p-value is the probability of observing a sample statistic under the assumption that the null hypothesis is true. 

- Start with your sample statistic, e.g. `\(\bar{Y}=65\)`

- Measures distance to the hypothesized parameter `\(\mu_0 \leq 50\)`

- Standardize distance as number of standard errors

$$ 
t = \frac{\bar{Y} - \mu_0}{\sigma_{\bar{Y}}} = \frac{65-50}{15} = 1
$$
- Calculate and connect  

$$
Pr(\bar{Y} \geq 65 | \mu_0 \leq 50) = Pr(t \geq 1) \approx 0.16
$$

---
# p-value as criterion

- Science abhors Type 1 error (throwing away good null/status quo)

- Reject null only for a massive disconnect b/w convention and available evidence

- Gold standard of 0.05
  - Reject null when `\(p \leq 0.05\)`
  - Fail to reject when `\(p &gt; 0.05\)`


---
class: inverse, middle, right

# FOUR TESTS IN R

### Using "hurricanes.csv" from Jung et al. (2014)


---
# Every R script


```r
# Packages
  library(tidyverse)
  library(stargazer)

# Set project folder
  setwd("~/sis600")
  
# load data
  df = read_csv("hurricanes.csv")
```


---
class: inverse
# Population mean (t-test)

- I have data for ONE numeric variable.
- I want to test hypotheses about a pop mean


---
# Population mean (t-test)

.left-column{
### Setup
}

.right-column{
&gt; On balance, are hurricane names more feminine than masculine? Use student ratings (femScale) to find out.  

- State hypotheses
- Calculate `\(p\)`-value based on a `\(t\)`-test
- Reject/fail to reject the null
}

---
# Population mean (t-test)

.left-column{
### Setup
### Hypotheses
}

.right-column{
&gt; On balance, are hurricane names more feminine than masculine? Use student ratings (femScale) to find out.  

- `\(H_A:~\mu&gt;5\)`
- `\(H_0:~\mu\leq5\)`

}

---
# Population mean (t-test)

.left-column{
### Setup
### Hypotheses
### t-test
}

.right-column{
&gt; On balance, are hurricane names more feminine than masculine? Use student ratings (femScale) to find out.  



```r
t.test(df$femScale, mu = 5, alternative = 'greater')
```

```
## 
## 	One Sample t-test
## 
## data:  df$femScale
## t = 5.2927, df = 91, p-value = 4.141e-07
## alternative hypothesis: true mean is greater than 5
## 95 percent confidence interval:
##  6.221675      Inf
## sample estimates:
## mean of x 
##  6.780797
```
}

---
# Population mean (t-test)

.left-column{
### Setup
### Hypotheses
### t-test
### Reject?
}

.right-column{
&gt; On balance, are hurricane names more feminine than masculine? Use student ratings (femScale) to find out.  


Student researchers rated the femininity of 92 hurricanes. The mean score of 6.8 is significantly higher than 5 `\((t=5.3,~p&lt;0.001)\)`. I conclude that hurricane names are systematically more feminine.

}


---
class: inverse
# Difference of means (t-test)

- I have:
  - Numeric outcome variable
  - Binary exposure variable

- I want to know if the mean outcome differs by group


---
# Difference of means (t-test)

.left-column{
### Setup
}

.right-column{
&gt; Are female-named hurricanes deadlier than male-named hurricanes? Describe the relationship, and evaluate the claim.

- State hypotheses
- Calculate `\(p\)`-value from diff of means test
- Reject/Fail to reject the null

}

---
# Difference of means (t-test)

.left-column{
### Setup
### Hypotheses
}

.right-column{
&gt; Are female-named hurricanes deadlier than male-named hurricanes? Describe the relationship, and evaluate the claim.

- Alternative: `\(H_A:~\mu_{Fem} &gt; \mu_{Male}\)`
- Null: `\(H_0~\mu_{Fem} \leq \mu_{Male}\)`

}

---
# Difference of means (t-test)

.left-column{
### Setup
### Hypotheses
### t-test
}

.right-column{
&gt; Are female-named hurricanes deadlier than male-named hurricanes? Describe the relationship, and evaluate the claim.


```r
t.test(log(deaths+1) ~ gender, data = df,
       alternative = 'greater')
```

```
## 
## 	Welch Two Sample t-test
## 
## data:  log(deaths + 1) by gender
## t = 0.91964, df = 67.569, p-value = 0.1805
## alternative hypothesis: true difference in means between group Female and group Male is greater than 0
## 95 percent confidence interval:
##  -0.2349648        Inf
## sample estimates:
## mean in group Female   mean in group Male 
##             2.238231             1.949377
```

}

---
# Difference of means (t-test)

.left-column{
### Setup
### Hypotheses
### t-test
### Reject?
}

.right-column{
The table below shows the relationship between hurricane-name gender and deaths using data from 94 hurricanes that made landfall in the US from 1950 to 2012. Death totals ranged from a 0 to 1,833 (Katrina, 2005). Female-named hurricanes caused 57 deaths on average. Consistent with Jung et al.'s (2014) argument, male-named hurricanes saw an average of only 15 deaths. However, the difference of means is not statistically significant ($t = 0.92,~ p = 0.19$, 1-tailed test of log-transformed mean).

&lt;table class=" lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
&lt;caption&gt;Deaths by gendered name&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; gender &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Min &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Max &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Med &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg (log) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1833 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 84 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.9 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

}


---
class: inverse
# Equality of group means (F-test)

- I have:
  - Numeric outcome variable
  - Categorical exposure variable

- I want to know if the mean outcome differs across groups

---
# Comparing equality of group means (F-test)

&gt; Evaluate the relationship between the intensity of the storm at landfall (category) and deaths caused. Use an F-test to assess the siginficance.

1. State hypotheses, `\(H_0:\)` equality of group means
2. Calculate `\(p\)`-value based on `\(F\)`-test
3. Reject/fail to reject the null


---
# Presenting results (F)

The table below summarizes the relationship between the category of storm at landfall and the loss of life. Category 1 storms are the most common and also the least deadly (mean = 13). [more on others] There are only three category 5 storms in the data with more than 700 deaths on average. The differences are statistically significant ($F = 31.14, ~ p &lt; 0.001$), and we reject the null hypothesis of independence.


&lt;table class=" lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
&lt;caption&gt;Deaths by storm severity&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; category &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Median &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg (log) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 256.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 717.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.7 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: inverse

# Regression

- I have:
  - Numeric outcome variable
  - (typically) Numeric exposure variable
  
- I want to know if the mean outcome is related to level of exposure


---
# Testing regression coefficients

.left-column{

### Setup

}
.right-column{

&gt; Is hurricane damage associated with the "femininity" of the storm's name?

- State hypotheses
- Estimate the regression, eval the coefficient (t-test)
- Present the results

}

---
# Testing regression coefficients

.left-column{

### Setup
### Hypotheses

}
.right-column{

&gt; Is hurricane damage associated with the "femininity" of the storm's name?

Given PRF: `\(damage_i = \alpha + \beta(femScale_i) + e_i\)`
- `\(H_A:~\beta \neq 0\)`
- `\(H_0:~\beta = 0\)`

}

---
# Testing regression coefficients

.left-column{

### Setup
### Hypotheses
### Estimate

}
.right-column{

&gt; Is hurricane damage associated with the "femininity" of the storm's name?


```r
# Estimate and store
  e1 = lm(log(deaths + 1) ~ femScale, data = df)
  e2 = lm(log(damage) ~ femScale, data = df)
    
# Present as table
  stargazer(e1,e2, type = 'text',
            keep.stat = 'n')
```

```
## 
## =========================================
##                  Dependent variable:     
##              ----------------------------
##              log(deaths + 1)  log(damage)
##                    (1)            (2)    
## -----------------------------------------
## femScale          0.015          0.033   
##                  (0.045)        (0.078)  
##                                          
## Constant         1.945***      6.950***  
##                  (0.340)        (0.583)  
##                                          
## -----------------------------------------
## Observations        92            92     
## =========================================
## Note:         *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01
```

}

---
# Testing regression coefficients

.left-column{

### Setup
### Hypotheses
### Estimate
### Interpret

}
.right-column{

We regressed hurricane deaths on the perceived femininity of 92 hurricanes making landfall in the US. We find that a one-point increase in femininity raises the average death toll by 1.5%. However, the effect is not significantly different from 0 `\((p=0.74)\)`.

}
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
